language: cpp
dist: xenial

addons:
  apt:
    sources:
     - sourceline: 'deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial main'
       key_url: 'https://apt.llvm.org/llvm-snapshot.gpg.key'
    packages:
     llvm-10-tools

compilers:
  - gcc
  - clang

install:
  - pip install lit --user --upgrade pip

script:
  - mkdir build
  - cd build
  - mkdir install
  - export PATH=$PATH:/usr/lib/llvm-10/bin
  - cmake ../ -DCMAKE_INSTALL_PREFIX=./install
  - make install
  - cd ..
  - lit build/test
